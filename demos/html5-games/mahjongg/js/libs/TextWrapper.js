var Helper;!function(t){var e;!function(t){t[t.UNDEFINED=-1]="UNDEFINED",t[t.SPACE=1]="SPACE",t[t.NEWLINE=2]="NEWLINE",t[t.CHARACTER=3]="CHARACTER"}(e||(e={}));var n=function(){function t(){}return t.hasNext=function(){return t.mTextPosition<t.mText.length},t.getChar=function(){return t.mText.charAt(t.mTextPosition++)},t.peekChar=function(){return t.mText.charAt(t.mTextPosition)},t.getPosition=function(){return t.mTextPosition},t.setPosition=function(e){t.mTextPosition=e},t.getCharAdvance=function(e,n){var r=t.mFontData.chars[e];void 0===r&&(r=t.mFontData.chars[Object.keys(t.mFontData.chars)[0]]);var o=r.xAdvance;return n>0&&r.kerning[n]&&(o+=r.kerning[n]),o},t.getCharType=function(t){return" "===t?1:/(?:\r\n|\r|\n)/.test(t)?2:3},t.wrapText=function(e,n,r,o,a,i){if(null==n&&(n=""),t.mText=n,t.setPosition(0),t.mFontData=e.cache.getBitmapFont(a).font,void 0==t.mFontData)return void console.log("TextWrapper.wrapText","Error: Font is not found");void 0===i&&(i=t.mFontData.size);var s=i/t.mFontData.size,c=t.mFontData.lineHeight*s,u=r/s,f=[],h=[],v=[],x=0,m=!0,T=0,g=0;f[x]=g,v[T++]=0;for(var p=o;t.hasNext();){for(var C=0,P=0,A=-1,E=-1,N=-1,D=u,F=-1;t.hasNext();){g=t.getPosition();var l=t.getChar();E=t.getCharType(l);var d=l.charCodeAt(0);if(1===E)1!==N&&(P=C),++C,D-=t.getCharAdvance(d,F);else if(3===E){if(3!==N&&(A=g),D-=t.getCharAdvance(d,F),0>D)break;++C}else if(2===E){var k=!1;if(t.hasNext()&&(k=!0,P=C,A=t.getPosition(),g=A,D=-1,E=3),k)break}N=E,F=d}p-=c,0>p&&(v[T++]=x),0>D&&3===E?(h[x]=0!==P?P:C,m=!1,0>p&&(m=!0,p=o-c),0!==P?(f[++x]=A,t.setPosition(A)):(f[++x]=g,t.setPosition(g))):t.hasNext()||(3===E?h[x]=C:1===E&&(h[x]=P))}v[T]=x+1;for(var H=[],b=1;T>=b;b++){for(var I=v[b-1],R=v[b],W=[],y=I;R>y;y++)W.push(t.mText.substr(f[y],h[y]));H.push(W.join(" \n"))}return H},t}();t.TextWrapper=n}(Helper||(Helper={}));